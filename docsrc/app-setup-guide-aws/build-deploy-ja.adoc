
== ビルドとデプロイ

=== ソースコードのビルドとデプロイ

* クラウド環境が正常に作成されたら、ソースコードをビルドしてデプロイします。
* バックエンドソースコードはdockerイメージとしてビルドされ、dockerイメージはLightsailコンテナにプッシュされます。管理者アプリとコントラクターアプリのソースコードがビルドされ、S3バケットにアップロードされます。
* `source-build.sh` スクリプトはすべてのソースコードをビルドし、コードへプッシュ・アップロードします。
* 以下のコマンドでビルドデプロイスクリプトを実行します。ビルドとデプロイは10分程度かかる場合があります。

[source,shell]
----
# from tools/cloud-setup/aws
$ bash source-build.sh
----
モジュールのビルドとデプロイが成功すると、Lightsailコンテナ `Images` タブに以下のdocker イメージが表示されます。
    
イメージ: `aatbackend.caat-backend-service.x` 

また、管理者アプリおよびコントラクターアプリ向けに作成されたS3バケットも、両ウェブアプリケーション向けの各CloudFrontディストリビューションと同様確認してください。

* この時点ですべてのサービスはデプロイされます。
* URLはアクセス可能ですが、データベース内のデータはまだ空のため、アプリを使用することはできません。
* データベースへのデータの入力については次章で説明します。
